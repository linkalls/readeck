/*
 * SPDX-FileCopyrightText: Â© 2021 Olivier Meunier <olivier@neokraft.net>
 *
 * SPDX-License-Identifier: AGPL-3.0-only
 */

@layer utilities
  .layout-topbar
    @apply flex-shrink-0
    @apply h-topnav

  .layout
    @apply min-h-screen grid
    grid-template-columns: theme("spacing.col-1") theme("spacing.col-5") minmax(auto, theme("spacing.col-23"))

    @screen max-sm
      @apply flex flex-col

    @media print
      @apply block

  .layout--bookmark
    grid-template-columns: theme("spacing.col-1") auto

  .layout-topnav
    @apply flex flex-col flex-shrink-0 gap-2
    @apply box-border py-2 w-col-1 h-screen
    @apply sticky top-0 z-20
    @apply bg-gray-200 text-black

    @screen max-sm
      @apply flex-row w-full h-topnav px-2

    @media print
      @apply hidden

    .logo
      @apply flex items-center justify-center
      @apply layout-topbar

      @screen max-sm
        @apply h-auto

    .mainmenu
      @apply flex-1 overflow-y-auto
      @apply flex flex-col items-center gap-2

      @screen max-sm
        @apply flex-row

      menu
        @apply flex flex-col gap-3

        @screen max-sm
          @apply flex-row gap-2

        a, button
          @apply block
          @apply rounded
          @apply p-3
          @apply text-gray-900 bg-black bg-opacity-5
          @apply hf:bg-opacity-10
          @apply data-current:bg-yellow-400 data-current:text-yellow-800 data-current:bg-opacity-50

          @screen max-xs
            @apply px-2

          .svgicon svg
            @apply w-5 h-5

  .sidemenu
    @apply flex-shrink-0 sticky top-0 z-30 h-screen overflow-y-auto shadow-sidebar-l bg-gradient-to-r from-gray-50 to-gray-100 px-4

    @screen max-sm
      @apply w-full

    @media print
      @apply hidden

    menu a
      @apply hf:text-primary data-current:font-bold data-current:text-primary-dark
      @apply block leading-none py-1 pl-1 mb-1 border-l-2 border-transparent hf:border-primary data-current:border-primary-dark

      @screen max-md
        @apply mb-2 text-lg

      .svgicon svg
        @apply w-5 h-5

  body.js .sidemenu
    @screen max-sm
      @apply fixed bottom-0 left-0 top-auto

  body.js .sidemenu--hidden
    @screen max-sm
      @apply hidden

  body.no-js .sidemenu
    @screen max-sm
      @apply relative h-auto order-last

  body.no-js button[aria-controls="sidemenu"]
    @apply hidden

  .layout-content
    @apply bg-transparent px-6 py-8

    @screen max-sm
      @apply pb-16

  .bookmark-grid
    @apply grid
    grid-template-columns: minmax(auto, theme("spacing.col-22")) theme("spacing.col-6")

    @screen max-md
      @apply flex flex-col
      @apply min-h-screen

    @screen max-sm
      min-height: calc(100vh - theme('spacing.topnav'))

    @media print
      @apply block


  .bookmark-content
    @apply col-start-1
    @apply row-start-1

    @apply bg-transparent
    @apply max-w-col-22 px-6 pb-8

    @screen md
      @apply min-h-screen

    @screen max-md
      @apply px-4 grow

    @media print
      @apply overflow-visible
      @apply max-w-none
      @apply px-0


  .bookmark-sidebar
    @apply col-start-2
    @apply row-start-1

    @apply w-col-6 h-screen sticky overflow-y-auto z-30
    @apply border-l border-l-gray-200

    @screen md
      @apply top-0

    @screen max-md
      @apply order-last
      @apply bottom-0 bg-white
      @apply w-full h-auto
      @apply overflow-y-hidden
      @apply flex flex-col
      @apply shadow-panel-t
      @apply transition-all ease-in-out

    @media print
      @apply static max-w-none w-full h-auto overflow-visible
      @apply mb-8 border-b border-l-0

  body.js .bookmark-sidebar
    @screen max-md
      max-height: 60vh

      .panel--hidden
        @apply hidden

    [aria-expanded="true"][aria-controls="bookmark-panel"] svg
      @apply rotate-180

  body.no-js .bookmark-sidebar
    @screen max-md
      @apply relative
