@use "../config" as *
@use "mixins"
@use "sass:color"

// Buttons
// ------------------------------------------------------------------
%button,
.button,
button,
input[type='button'],
input[type='reset'],
input[type='submit']
  @extend %control
  @extend %control-hover
  @extend %unselectable
  cursor: pointer
  justify-content: center
  padding: 0 1rem
  height: 3.6rem
  font-size: 1em

  &[disabled]
    cursor: not-allowed
    opacity: .5

    &:focus,
    &:hover
      background-color: $primary
      border-color: $primary

  &.button-clear
    appearance: none
    background-color: transparent
    border-color: transparent
    color: $primary
    height: auto

    &:focus,
    &:hover
      background-color: transparent
      border-color: transparent
      color: $primary-accent

    &[disabled]
      &:focus,
      &:hover
        color: $primary

  &.button-delete
    appearance: none
    background-color: transparent
    border: none
    display: inline-block
    flex-grow: 0
    flex-shrink: 0
    line-height: 1
    font-size: 1em
    height: 1em
    max-height: 1em
    min-height: 1em
    width: 1em
    min-width: 1em
    max-width: 1em
    outline: none
    position: relative
    vertical-align: top
    padding: 0

    &::before,
    &::after
      background-color: $danger
      content: ""
      display: block
      position: absolute
      top: 50%
      left: 50%
      transform: translateX(-50%) translateY(-50%) rotate(45deg)
      transform-origin: center center

    &::before
      height: 2px
      width: 50%

    &::after
      height: 50%
      width: 2px

    &:hover::before,
    &:hover::after
      background-color: $danger-accent


// Form elements
// ------------------------------------------------------------------
input[type='color'],
input[type='date'],
input[type='datetime'],
input[type='datetime-local'],
input[type='email'],
input[type='month'],
input[type='number'],
input[type='password'],
input[type='search'],
input[type='tel'],
input[type='text'],
input[type='url'],
input[type='week'],
input:not([type]),
textarea,
select
  -webkit-appearance: none // sass-lint:disable-line no-vendor-prefixes
  background-color: $body-background
  border: 1px solid $grey-light
  border-radius: $radius
  box-shadow: none
  box-sizing: inherit // Forced to replace inherit values of the normalize.css
  height: 3.6rem
  padding: .6rem 1.0rem .7rem // This vertically centers text on FF, ignored by Webkit

  &:focus
    border-color: $primary
    outline: 0

select
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 8" width="30"><path fill="%23' + str-slice(inspect($grey), 2) + '" d="M0,0l6,8l6-8"/></svg>') center right no-repeat
  padding-right: 3rem

  &:focus
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 8" width="30"><path fill="%23' + str-slice(inspect($primary), 2) + '" d="M0,0l6,8l6-8"/></svg>')

  &[multiple]
    background: none
    height: auto

textarea
  min-height: 6.5rem

label[for]
  cursor: pointer

label,
legend
  display: block
  font-size: 1.6rem
  font-weight: 700
  margin-bottom: .5rem

fieldset
  border-width: 0
  padding: 0

input[type='checkbox'],
input[type='radio']
  display: inline

.label-inline
  display: inline-block
  font-weight: normal
  margin-left: .5rem


// Field & button classes
// ------------------------------------------------------------------
input, button, .button, %button
  &.rounded
    border-radius: $radius-rounded
    padding-left: 1em
    padding-right: 1em

  &.icon
    width: 3.6rem

  &.outlined
    background-color: transparent
    border-color: $primary
    color: $primary
s
    &:focus,
    &:hover
      background-color: $primary
      color: $primary-invert


// Field
// ------------------------------------------------------------------
.field
  margin-bottom: $block-spacing/2

  label
    margin-bottom: 0

  &.max
    input
      width: 100%

  &.horizontal
    display: flex
    align-items: baseline

    & > label:first-child
      width: 15rem
      margin-right: 1rem
      text-align: left

  .errors
    color: $danger

  &.with-errors
    input[type='color'],
    input[type='date'],
    input[type='datetime'],
    input[type='datetime-local'],
    input[type='email'],
    input[type='month'],
    input[type='number'],
    input[type='password'],
    input[type='search'],
    input[type='tel'],
    input[type='text'],
    input[type='url'],
    input[type='week'],
    input:not([type]),
    textarea,
    select
      border-color: $danger
      box-shadow: 0 0 6px rgba($danger, 0.3)


// Field compound
// ------------------------------------------------------------------
.compound
  display: inline-flex

  & > input:first-child,
  & > button:first-child
      border-top-right-radius: 0
      border-bottom-right-radius: 0
      border-right: 0

  & > input:last-child,
  & > button:last-child
      border-top-left-radius: 0
      border-bottom-left-radius: 0
      border-left: 0

  & > button:not(:first-child, :last-child),
  & > input:not(:first-child, :last-child)
    border-radius: 0
