---

name: Setup Readeck
description: |
  Setup build environment.

inputs:
  go_clean:
    description: Clean Go Cache
    default: "false"

  python:
    description: Install UV
    default: "false"


runs:
  using: "composite"
  steps:
    #
    # Setup Env
    #
    - uses: actions/setup-go@v5
      with:
        go-version-file: 'go.mod'
        cache: false

    - uses: actions/setup-node@v4
      with:
        node-version: "18.x"

    - name: Setup UV
      if: ${{ fromJson(inputs.python) }}
      uses: https://github.com/astral-sh/setup-uv@v3

    - name: Clean Go cache
      if: ${{ fromJson(inputs.go_clean) }}
      shell: bash
      run: |
        go clean -cache
        rm -rf ${HOME}/.xgo-cache

    - name: Setup project
      shell: bash
      run: |
        make setup
