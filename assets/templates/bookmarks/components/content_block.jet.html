{{ import "../../_libs/common" }}

<turbo-frame id="bookmark-content-{{ .Item.ID }}"
 {{- if .Item.Type == "article" -}}
 src="{{ urlFor(`/api/bookmarks`, .Item.ID) }}/article"
 disabled
 data-controller="annotations"
 data-action="request:annotation-removed@document->annotations#reload"
 data-annotations-api-url-value="{{ urlFor(`/api/bookmarks`, .Item.ID) }}/annotations"
 data-annotations-hidden-class="hidden"
 {{- end -}}
>

{{- if .Item.Type == "article" -}}
  <div class="max-w-3xl mx-auto print:max-w-none relative">
    <div class="hidden absolute z-50"
     data-annotations-target="controlls">
      <div class="rounded-lg shadow-lg bg-gray-700 text-white">
        <button data-annotations-target="controllCreate" data-action="click->annotations#save"
        class="p-4 hf:text-primary-light"
        title="highlight selection">{{ yield icon(name="o-highlight") }} Highlight</button>
        <button data-annotations-target="controllDelete" data-action="click->annotations#delete"
        class="p-4 text-red-200 hf:text-red-300"
        title="remove highlight(s)">{{ yield icon(name="o-trash") }} Remove Highlight(s)</button>
      </div>
      <div class="h-0 w-0 border-x-8 border-x-transparent border-t-[8px] border-t-gray-700 mx-auto"
       data-annotations-target="arrow"></div>
    </div>
    <div class="font-serif text-lg leading-normal prose"
     lang="{{ .Item.Lang }}"
     data-annotations-target="root">
      {{- rawCopy(.Out, .HTML) -}}
    </div>
  </div>
{{- else if .Item.Type == "photo" -}}
  <figure>
    <img alt="" src="{{ .Item.Resources.image.Src }}"
    class="mx-auto"
    width="{{ .Item.Resources.image.Width }}" height="{{ .Item.Resources.image.Height }}">
  </figure>
{{- else if .Item.Type == "video" -}}
  <div class="video-wrapper">
    <div class="video-player"
    data-controller="video" data-video-embed-value="{{ .Item.Embed }}">
      <img alt="" src="{{ .Item.Resources.image.Src }}"
      width="{{ .Item.Resources.image.Width }}" height="{{ .Item.Resources.image.Height }}">
    </div>
  </div>
{{- end -}}
</turbo-frame>
